# merge-video 分别设置转场效果使用指南

## 🎯 功能概述

merge-video 现在支持为每个视频之间分别设置不同的转场效果，让视频合并更加灵活和个性化。

## 🔧 配置方式

### 方式一：统一转场效果（原有方式）
```javascript
"merge-video": {
  urls: ["视频1", "视频2", "视频3"],
  switch: "时光流转", // 所有视频之间使用相同的转场效果
}
```

### 方式二：分别设置转场效果（新功能）
```javascript
"merge-video": {
  urls: ["视频1", "视频2", "视频3"],
  transitions: [
    "时光流转",  // 视频1 → 视频2 的转场效果
    "岁月如歌",  // 视频2 → 视频3 的转场效果
  ],
}
```

## 📊 配置规则

### 转场效果数量
- **视频数量**: N 个视频
- **转场效果数量**: N-1 个转场效果
- **示例**: 3个视频需要2个转场效果

### 自动调整机制
- **数量不足**: 自动用第一个效果填充
- **数量过多**: 自动截断多余的效果
- **智能提示**: 显示调整信息

## 🎨 可用转场效果

### 基础效果
- `叠化` - 经典的交叉淡化效果
- `淡入淡出` - 简单的淡入淡出
- `推拉` - 推拉式转场
- `擦除` - 擦除式转场
- `无转场` - 直接拼接

### 历史人物专用效果
- `时光流转` - 适用于跨越多年的人生阶段转换
- `岁月如歌` - 适用于温馨的成长历程
- `历史回眸` - 适用于重大历史事件的庄重呈现
- `命运转折` - 适用于人物命运的重大转折
- `精神传承` - 适用于表现人物精神品质的传承
- `时代变迁` - 适用于不同历史时期的宏大叙事
- `心路历程` - 适用于人物内心世界的细腻变化
- `光影交错` - 适用于现实与回忆的交织呈现

## 🚀 使用示例

### 示例1：历史人物传记
```javascript
"merge-video": {
  urls: [
    "童年时期.mp4",
    "求学阶段.mp4", 
    "事业巅峰.mp4",
    "晚年回忆.mp4"
  ],
  transitions: [
    "时光流转",  // 童年 → 求学：时间跨越
    "命运转折",  // 求学 → 事业：人生转折
    "岁月如歌",  // 事业 → 晚年：温馨回忆
  ],
}
```

### 示例2：混合风格
```javascript
"merge-video": {
  urls: [
    "开场.mp4",
    "正文.mp4",
    "结尾.mp4"
  ],
  transitions: [
    "叠化",      // 开场 → 正文：平滑过渡
    "历史回眸",  // 正文 → 结尾：庄重结束
  ],
}
```

## 📝 日志输出

### 配置检查
```
🔍 图片生成检查:
   - 现有图片数量: 13
   - 需要图片数量: 13
   - 需要生成图片: false

转场效果配置:
  视频1 → 视频2: 时光流转 (适用于跨越多年的人生阶段转换...)
  视频2 → 视频3: 岁月如歌 (适用于温馨的成长历程...)
```

### 处理过程
```
开始合并 3 个视频文件
转场效果: 时光流转 → 岁月如歌
使用转场效果: 时光流转 → 岁月如歌
```

## ⚠️ 注意事项

### 配置冲突
- **不要同时设置** `switch` 和 `transitions`
- 优先级：`transitions` > `switch`
- 建议：选择一种方式并注释掉另一种

### 效果验证
- 程序会自动检查转场效果是否支持
- 不支持的效果会替换为 `叠化`
- 显示详细的警告信息

### 性能考虑
- 复杂转场效果处理时间更长
- 建议使用高质量编码设置（CRF 12）
- 确保有足够的磁盘空间

## 🎯 最佳实践

### 1. 根据内容选择转场
- **时间跨越**: 使用 `时光流转`
- **情感变化**: 使用 `心路历程`
- **重大事件**: 使用 `历史回眸`
- **简单拼接**: 使用 `无转场`

### 2. 保持风格一致
- 同一视频中使用相似风格的转场
- 避免过于频繁的风格切换
- 考虑整体观看体验

### 3. 测试效果
- 先用短视频测试转场效果
- 确认效果符合预期再处理完整视频
- 注意转场时长和视频内容的匹配

## 🔧 故障排除

### 问题1：转场效果不生效
**解决**: 检查转场效果名称是否正确，参考支持的效果列表

### 问题2：数量不匹配警告
**解决**: 确保转场效果数量 = 视频数量 - 1

### 问题3：配置冲突
**解决**: 只使用 `switch` 或 `transitions` 中的一种

---

这个功能让你可以为每个视频转换创造独特的视觉体验，完美适配不同的内容需求！
